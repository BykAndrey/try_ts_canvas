(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ObjectScene = /** @class */ (function () {
    function ObjectScene(context, x, y) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        this.ctx = context;
        this._x = x;
        this._y = y;
        /*console.log({
          x: this._x,
          y: this._y
        });*/
        this.update();
    }
    ObjectScene.prototype.getPosition = function () {
        return {
            x: this._x,
            y: this._y
        };
    };
    ObjectScene.prototype.setPosition = function (x, y) {
        this._x = x;
        this._y = y;
    };
    ObjectScene.prototype.update = function () {
        //console.log("update");
    };
    return ObjectScene;
}());
exports.default = ObjectScene;
},{}],2:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ObjectScene_1 = require("./ObjectScene");
var config_1 = require("./../config");
var Point = /** @class */ (function (_super) {
    __extends(Point, _super);
    function Point(context, id, x, y, r, speed) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (r === void 0) { r = 10; }
        if (speed === void 0) { speed = 3; }
        var _this = _super.call(this, context, x, y) || this;
        _this._directionX = Math.random() - 0.5;
        _this._directionY = Math.random() - 0.5;
        _this._speed = 2;
        _this._opacity = 0.1;
        _this._id = 1;
        _this._id = id;
        _this._r = r;
        _this._speed = speed;
        return _this;
    }
    Point.prototype.getRadius = function () {
        return this._r;
    };
    Point.prototype.setRadius = function (r) {
        this._r = r;
    };
    Point.prototype.resetOpacity = function () {
        this._opacity = 0;
    };
    Point.prototype.setOpacity = function (opacity) {
        this._opacity = opacity > this._opacity ? opacity : this._opacity;
    };
    Point.prototype.move = function () {
        var x = this._x;
        var y = this._y;
        if (x >= config_1.WINDOW_WIDTH) {
            this._directionX = Math.random() * -1;
        }
        if (x <= 0) {
            this._directionX = Math.random();
        }
        if (y >= config_1.WINDOW_HEIGHT) {
            this._directionY = Math.random() * -1;
        }
        if (y <= 0) {
            this._directionY = Math.random();
        }
        x += this._speed * this._directionX;
        y += this._speed * this._directionY;
        this.setPosition(x, y);
    };
    Point.prototype.update = function () {
        _super.prototype.update.call(this);
        this.ctx.translate(config_1.WINDOW_WIDTH / 2, config_1.WINDOW_HEIGHT / 2);
        this.ctx.translate(-config_1.WINDOW_WIDTH / 2, -config_1.WINDOW_HEIGHT / 2);
        //console.log(this._opacity);
        this.ctx.strokeStyle = "rgba(255,255,255," + this._opacity + ")";
        this.ctx.fillStyle = "rgba(255,255,255," + this._opacity + ")";
        this.ctx.beginPath();
        this.ctx.arc(this._x, this._y, this._r, 0, 2 * Math.PI);
        this.ctx.stroke();
        this.ctx.fill();
        /* this.ctx.fillStyle = "red";
        this.ctx.fillText(this._id, this._x, this._y);*/
    };
    return Point;
}(ObjectScene_1.default));
exports.default = Point;
},{"./../config":3,"./ObjectScene":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var WINDOW_HEIGHT = window.innerHeight;
exports.WINDOW_HEIGHT = WINDOW_HEIGHT;
var WINDOW_WIDTH = window.innerWidth;
exports.WINDOW_WIDTH = WINDOW_WIDTH;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Point_1 = require("./componets/Point");
var config_1 = require("./config");
var SIZE = 20;
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var DISTANCE = 300;
function setSizeCanvas(canv) {
    canv.setAttribute("width", config_1.WINDOW_WIDTH.toString() + "px");
    canv.setAttribute("height", config_1.WINDOW_HEIGHT.toString() + "px");
}
setSizeCanvas(canvas);
var points = [];
for (var i = 0; i < SIZE; i++) {
    points.push(new Point_1.default(ctx, i, config_1.WINDOW_WIDTH / 2 + Math.sin(10 * i) * (config_1.WINDOW_WIDTH / 5), config_1.WINDOW_HEIGHT / 2 + Math.sin(10 * i) * (config_1.WINDOW_HEIGHT / 5), (Math.random() + 1) * 2, (Math.random() + 1) * (Math.random() + 1)));
}
function Distance(a, b) {
    var x = Math.abs(Math.abs(a.getPosition().x) - Math.abs(b.getPosition().x));
    var y = Math.abs(Math.abs(a.getPosition().y) - Math.abs(b.getPosition().y));
    var c = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));
    var r = 1 - c / DISTANCE;
    return r;
}
function DrawLine(a, b) {
    var r = Distance(a, b) - 0.1;
    var color = "rgba(255, 255, 255," + r + ")";
    ctx.strokeStyle = color;
    ctx.beginPath();
    ctx.moveTo(a.getPosition().x, a.getPosition().y);
    ctx.lineTo(b.getPosition().x, b.getPosition().y);
    ctx.stroke();
    return r;
}
var last = new Date();
function update() {
    var t2 = new Date();
    if (t2.getTime() - last.getTime() > 1000 / 30) {
        ctx.clearRect(0, 0, config_1.WINDOW_WIDTH, config_1.WINDOW_HEIGHT);
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, config_1.WINDOW_WIDTH, config_1.WINDOW_HEIGHT);
        for (var i = 0; i < SIZE - 1; i++) {
            points[i].move();
            points[i].resetOpacity(0);
            for (var j = 0; j < SIZE - 1; j++) {
                if (i < j) {
                    DrawLine(points[i], points[j]);
                }
                if (i !== j) {
                    var newop = Distance(points[i], points[j]);
                    points[i].setOpacity(newop);
                }
            }
            //console.log(`${i} = ${maxOpacity}`);
            points[i].update();
        }
        last = t2;
    }
    setTimeout(function () {
        update();
    }, 1);
}
setTimeout(function () {
    update();
}, 10);
},{"./componets/Point":2,"./config":3}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tcG9uZXRzL09iamVjdFNjZW5lLnRzIiwic3JjL2NvbXBvbmV0cy9Qb2ludC50cyIsInNyYy9jb25maWcudHMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7SUFLRSxxQkFBWSxPQUFlLEVBQUUsQ0FBYSxFQUFFLENBQWE7UUFBNUIsa0JBQUEsRUFBQSxLQUFhO1FBQUUsa0JBQUEsRUFBQSxLQUFhO1FBQ3ZELElBQUksQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDO1FBQ25CLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1osSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDWjs7O2FBR0s7UUFDTCxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUNELGlDQUFXLEdBQVg7UUFDRSxPQUFPO1lBQ0wsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFO1lBQ1YsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFO1NBQ1gsQ0FBQztJQUNKLENBQUM7SUFDRCxpQ0FBVyxHQUFYLFVBQVksQ0FBUyxFQUFFLENBQVM7UUFDOUIsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDWixJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNkLENBQUM7SUFFRCw0QkFBTSxHQUFOO1FBQ0Usd0JBQXdCO0lBQzFCLENBQUM7SUFDSCxrQkFBQztBQUFELENBN0JBLEFBNkJDLElBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdCRCw2Q0FBd0M7QUFDeEMsc0NBQTBEO0FBQzFEO0lBQW1DLHlCQUFXO0lBTzVDLGVBQ0UsT0FBZSxFQUNmLEVBQVUsRUFDVixDQUFhLEVBQ2IsQ0FBYSxFQUNiLENBQWMsRUFDZCxLQUFpQjtRQUhqQixrQkFBQSxFQUFBLEtBQWE7UUFDYixrQkFBQSxFQUFBLEtBQWE7UUFDYixrQkFB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IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE9iamVjdFNjZW5lIHtcclxuICBjdHg6IE9iamVjdDtcclxuICBfeDogbnVtYmVyO1xyXG4gIF95OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IE9iamVjdCwgeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCkge1xyXG4gICAgdGhpcy5jdHggPSBjb250ZXh0O1xyXG4gICAgdGhpcy5feCA9IHg7XHJcbiAgICB0aGlzLl95ID0geTtcclxuICAgIC8qY29uc29sZS5sb2coe1xyXG4gICAgICB4OiB0aGlzLl94LFxyXG4gICAgICB5OiB0aGlzLl95XHJcbiAgICB9KTsqL1xyXG4gICAgdGhpcy51cGRhdGUoKTtcclxuICB9XHJcbiAgZ2V0UG9zaXRpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiB0aGlzLl94LFxyXG4gICAgICB5OiB0aGlzLl95XHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRQb3NpdGlvbih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgdGhpcy5feCA9IHg7XHJcbiAgICB0aGlzLl95ID0geTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIC8vY29uc29sZS5sb2coXCJ1cGRhdGVcIik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBPYmplY3RTY2VuZSBmcm9tIFwiLi9PYmplY3RTY2VuZVwiO1xyXG5pbXBvcnQgeyBXSU5ET1dfSEVJR0hULCBXSU5ET1dfV0lEVEggfSBmcm9tIFwiLi8uLi9jb25maWdcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9pbnQgZXh0ZW5kcyBPYmplY3RTY2VuZSB7XHJcbiAgX3I6IG51bWJlcjtcclxuICBfZGlyZWN0aW9uWDogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAtIDAuNTtcclxuICBfZGlyZWN0aW9uWTogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAtIDAuNTtcclxuICBfc3BlZWQ6IG51bWJlciA9IDI7XHJcbiAgX29wYWNpdHk6IG51bWJlciA9IDAuMTtcclxuICBfaWQ6IG51bWJlciA9IDE7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBjb250ZXh0OiBPYmplY3QsXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgeDogbnVtYmVyID0gMCxcclxuICAgIHk6IG51bWJlciA9IDAsXHJcbiAgICByOiBudW1iZXIgPSAxMCxcclxuICAgIHNwZWVkOiBudW1iZXIgPSAzXHJcbiAgKSB7XHJcbiAgICBzdXBlcihjb250ZXh0LCB4LCB5KTtcclxuICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgICB0aGlzLl9yID0gcjtcclxuICAgIHRoaXMuX3NwZWVkID0gc3BlZWQ7XHJcbiAgfVxyXG4gIGdldFJhZGl1cygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yO1xyXG4gIH1cclxuICBzZXRSYWRpdXMocjogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9yID0gcjtcclxuICB9XHJcbiAgcmVzZXRPcGFjaXR5KCkge1xyXG4gICAgdGhpcy5fb3BhY2l0eSA9IDA7XHJcbiAgfVxyXG4gIHNldE9wYWNpdHkob3BhY2l0eTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9vcGFjaXR5ID0gb3BhY2l0eSA+IHRoaXMuX29wYWNpdHkgPyBvcGFjaXR5IDogdGhpcy5fb3BhY2l0eTtcclxuICB9XHJcbiAgbW92ZSgpIHtcclxuICAgIGxldCB4ID0gdGhpcy5feDtcclxuICAgIGxldCB5ID0gdGhpcy5feTtcclxuICAgIGlmICh4ID49IFdJTkRPV19XSURUSCkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb25YID0gTWF0aC5yYW5kb20oKSAqIC0xO1xyXG4gICAgfVxyXG4gICAgaWYgKHggPD0gMCkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb25YID0gTWF0aC5yYW5kb20oKTtcclxuICAgIH1cclxuICAgIGlmICh5ID49IFdJTkRPV19IRUlHSFQpIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uWSA9IE1hdGgucmFuZG9tKCkgKiAtMTtcclxuICAgIH1cclxuICAgIGlmICh5IDw9IDApIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uWSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICB9XHJcbiAgICB4ICs9IHRoaXMuX3NwZWVkICogdGhpcy5fZGlyZWN0aW9uWDtcclxuICAgIHkgKz0gdGhpcy5fc3BlZWQgKiB0aGlzLl9kaXJlY3Rpb25ZO1xyXG4gICAgdGhpcy5zZXRQb3NpdGlvbih4LCB5KTtcclxuICB9XHJcbiAgdXBkYXRlKCkge1xyXG4gICAgc3VwZXIudXBkYXRlKCk7XHJcbiAgICB0aGlzLmN0eC50cmFuc2xhdGUoV0lORE9XX1dJRFRIIC8gMiwgV0lORE9XX0hFSUdIVCAvIDIpO1xyXG5cclxuICAgIHRoaXMuY3R4LnRyYW5zbGF0ZSgtV0lORE9XX1dJRFRIIC8gMiwgLVdJTkRPV19IRUlHSFQgLyAyKTtcclxuICAgIC8vY29uc29sZS5sb2codGhpcy5fb3BhY2l0eSk7XHJcblxyXG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsXCIgKyB0aGlzLl9vcGFjaXR5ICsgXCIpXCI7XHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsXCIgKyB0aGlzLl9vcGFjaXR5ICsgXCIpXCI7XHJcbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgIHRoaXMuY3R4LmFyYyh0aGlzLl94LCB0aGlzLl95LCB0aGlzLl9yLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICB0aGlzLmN0eC5zdHJva2UoKTtcclxuICAgIHRoaXMuY3R4LmZpbGwoKTtcclxuXHJcbiAgICAvKiB0aGlzLmN0eC5maWxsU3R5bGUgPSBcInJlZFwiO1xyXG4gICAgdGhpcy5jdHguZmlsbFRleHQodGhpcy5faWQsIHRoaXMuX3gsIHRoaXMuX3kpOyovXHJcbiAgfVxyXG59XHJcbiIsImxldCBXSU5ET1dfSEVJR0hUID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5sZXQgV0lORE9XX1dJRFRIID0gd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG5leHBvcnQgeyBXSU5ET1dfV0lEVEgsIFdJTkRPV19IRUlHSFQgfTtcclxuIiwiaW1wb3J0IFBvaW50IGZyb20gXCIuL2NvbXBvbmV0cy9Qb2ludFwiO1xyXG5pbXBvcnQgeyBXSU5ET1dfV0lEVEgsIFdJTkRPV19IRUlHSFQgfSBmcm9tIFwiLi9jb25maWdcIjtcclxubGV0IFNJWkUgPSAyMDtcclxubGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xyXG5sZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbmxldCBESVNUQU5DRSA9IDMwMDtcclxuXHJcbmZ1bmN0aW9uIHNldFNpemVDYW52YXMoY2FudjogT2JqZWN0KSB7XHJcbiAgY2Fudi5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBXSU5ET1dfV0lEVEgudG9TdHJpbmcoKSArIFwicHhcIik7XHJcbiAgY2Fudi5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgV0lORE9XX0hFSUdIVC50b1N0cmluZygpICsgXCJweFwiKTtcclxufVxyXG5zZXRTaXplQ2FudmFzKGNhbnZhcyk7XHJcblxyXG5sZXQgcG9pbnRzOiBQb2ludCA9IFtdO1xyXG5mb3IgKGxldCBpID0gMDsgaSA8IFNJWkU7IGkrKykge1xyXG4gIHBvaW50cy5wdXNoKFxyXG4gICAgbmV3IFBvaW50KFxyXG4gICAgICBjdHgsXHJcbiAgICAgIGksXHJcbiAgICAgIFdJTkRPV19XSURUSCAvIDIgKyBNYXRoLnNpbigxMCAqIGkpICogKFdJTkRPV19XSURUSCAvIDUpLFxyXG4gICAgICBXSU5ET1dfSEVJR0hUIC8gMiArIE1hdGguc2luKDEwICogaSkgKiAoV0lORE9XX0hFSUdIVCAvIDUpLFxyXG4gICAgICAoTWF0aC5yYW5kb20oKSArIDEpICogMixcclxuICAgICAgKE1hdGgucmFuZG9tKCkgKyAxKSAqIChNYXRoLnJhbmRvbSgpICsgMSlcclxuICAgIClcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEaXN0YW5jZShhOiBPYmplY3QsIGI6IE9iamVjdCkge1xyXG4gIGxldCB4ID0gTWF0aC5hYnMoTWF0aC5hYnMoYS5nZXRQb3NpdGlvbigpLngpIC0gTWF0aC5hYnMoYi5nZXRQb3NpdGlvbigpLngpKTtcclxuICBsZXQgeSA9IE1hdGguYWJzKE1hdGguYWJzKGEuZ2V0UG9zaXRpb24oKS55KSAtIE1hdGguYWJzKGIuZ2V0UG9zaXRpb24oKS55KSk7XHJcblxyXG4gIGxldCBjID0gTWF0aC5zcXJ0KE1hdGgucG93KHgsIDIpICsgTWF0aC5wb3coeSwgMikpO1xyXG4gIGxldCByID0gMSAtIGMgLyBESVNUQU5DRTtcclxuICByZXR1cm4gcjtcclxufVxyXG5mdW5jdGlvbiBEcmF3TGluZShhOiBPYmplY3QsIGI6IE9iamVjdCkge1xyXG4gIGxldCByID0gRGlzdGFuY2UoYSwgYikgLSAwLjE7XHJcbiAgbGV0IGNvbG9yID0gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsXCIgKyByICsgXCIpXCI7XHJcbiAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gIGN0eC5tb3ZlVG8oYS5nZXRQb3NpdGlvbigpLngsIGEuZ2V0UG9zaXRpb24oKS55KTtcclxuICBjdHgubGluZVRvKGIuZ2V0UG9zaXRpb24oKS54LCBiLmdldFBvc2l0aW9uKCkueSk7XHJcbiAgY3R4LnN0cm9rZSgpO1xyXG4gIHJldHVybiByO1xyXG59XHJcblxyXG5sZXQgbGFzdCA9IG5ldyBEYXRlKCk7XHJcbmZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICBsZXQgdDIgPSBuZXcgRGF0ZSgpO1xyXG4gIGlmICh0Mi5nZXRUaW1lKCkgLSBsYXN0LmdldFRpbWUoKSA+IDEwMDAgLyAzMCkge1xyXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBXSU5ET1dfV0lEVEgsIFdJTkRPV19IRUlHSFQpO1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBXSU5ET1dfV0lEVEgsIFdJTkRPV19IRUlHSFQpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBTSVpFIC0gMTsgaSsrKSB7XHJcbiAgICAgIHBvaW50c1tpXS5tb3ZlKCk7XHJcbiAgICAgIHBvaW50c1tpXS5yZXNldE9wYWNpdHkoMCk7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgU0laRSAtIDE7IGorKykge1xyXG4gICAgICAgIGlmIChpIDwgaikge1xyXG4gICAgICAgICAgRHJhd0xpbmUocG9pbnRzW2ldLCBwb2ludHNbal0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaSAhPT0gaikge1xyXG4gICAgICAgICAgbGV0IG5ld29wID0gRGlzdGFuY2UocG9pbnRzW2ldLCBwb2ludHNbal0pO1xyXG4gICAgICAgICAgcG9pbnRzW2ldLnNldE9wYWNpdHkobmV3b3ApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvL2NvbnNvbGUubG9nKGAke2l9ID0gJHttYXhPcGFjaXR5fWApO1xyXG5cclxuICAgICAgcG9pbnRzW2ldLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgbGFzdCA9IHQyO1xyXG4gIH1cclxuXHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICB1cGRhdGUoKTtcclxuICB9LCAxKTtcclxufVxyXG5zZXRUaW1lb3V0KCgpID0+IHtcclxuICB1cGRhdGUoKTtcclxufSwgMTApO1xyXG4iXX0=
