(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ObjectScene = /** @class */ (function () {
    function ObjectScene(context, x, y) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        this.ctx = context;
        this._x = x;
        this._y = y;
        /*console.log({
          x: this._x,
          y: this._y
        });*/
        this.update();
    }
    ObjectScene.prototype.getPosition = function () {
        return {
            x: this._x,
            y: this._y
        };
    };
    ObjectScene.prototype.setPosition = function (x, y) {
        this._x = x;
        this._y = y;
    };
    ObjectScene.prototype.update = function () {
        //console.log("update");
    };
    return ObjectScene;
}());
exports.default = ObjectScene;
},{}],2:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ObjectScene_1 = require("./ObjectScene");
var config_1 = require("./../config");
var Point = /** @class */ (function (_super) {
    __extends(Point, _super);
    function Point(context, id, x, y, r, speed) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (r === void 0) { r = 10; }
        if (speed === void 0) { speed = 3; }
        var _this = _super.call(this, context, x, y) || this;
        _this._directionX = Math.random() - 0.5;
        _this._directionY = Math.random() - 0.5;
        _this._speed = 2;
        _this._opacity = 0.1;
        _this._id = 1;
        _this._id = id;
        _this._r = r;
        _this._speed = speed;
        return _this;
    }
    Point.prototype.getRadius = function () {
        return this._r;
    };
    Point.prototype.setRadius = function (r) {
        this._r = r;
    };
    Point.prototype.resetOpacity = function () {
        this._opacity = 0;
    };
    Point.prototype.setOpacity = function (opacity) {
        this._opacity = opacity > this._opacity ? opacity : this._opacity;
    };
    Point.prototype.move = function () {
        var x = this._x;
        var y = this._y;
        if (x >= config_1.WINDOW_WIDTH) {
            this._directionX = Math.random() * -1;
        }
        if (x <= 0) {
            this._directionX = Math.random();
        }
        if (y >= config_1.WINDOW_HEIGHT) {
            this._directionY = Math.random() * -1;
        }
        if (y <= 0) {
            this._directionY = Math.random();
        }
        x += this._speed * this._directionX;
        y += this._speed * this._directionY;
        this.setPosition(x, y);
    };
    Point.prototype.update = function () {
        _super.prototype.update.call(this);
        this.ctx.translate(config_1.WINDOW_WIDTH / 2, config_1.WINDOW_HEIGHT / 2);
        this.ctx.translate(-config_1.WINDOW_WIDTH / 2, -config_1.WINDOW_HEIGHT / 2);
        this.ctx.shadowColor = "red";
        this.ctx.shadowBlur = 15;
        this.ctx.strokeStyle = "rgba(255,255,255," + this._opacity + ")";
        this.ctx.fillStyle = "rgba(255,255,255," + this._opacity + ") )";
        this.ctx.beginPath();
        this.ctx.arc(this._x, this._y, this._r, 0, 2 * Math.PI);
        this.ctx.stroke();
        this.ctx.fill();
        /* this.ctx.fillStyle = "red";
        this.ctx.fillText(this._id, this._x, this._y);*/
    };
    return Point;
}(ObjectScene_1.default));
exports.default = Point;
},{"./../config":3,"./ObjectScene":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var WINDOW_HEIGHT = window.innerHeight;
exports.WINDOW_HEIGHT = WINDOW_HEIGHT;
var WINDOW_WIDTH = window.innerWidth;
exports.WINDOW_WIDTH = WINDOW_WIDTH;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Point_1 = require("./componets/Point");
var config_1 = require("./config");
var SIZE = 0;
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var DISTANCE = 1;
var points = [];
function setSizeCanvas(canv) {
    canv.setAttribute("width", config_1.WINDOW_WIDTH.toString() + "px");
    canv.setAttribute("height", config_1.WINDOW_HEIGHT.toString() + "px");
}
setSizeCanvas(canvas);
function append(id) {
    SIZE++;
    points.push(new Point_1.default(ctx, id, config_1.WINDOW_WIDTH / 2 + Math.sin(10 * id) * (config_1.WINDOW_WIDTH / 5), config_1.WINDOW_HEIGHT / 2 + Math.cos(10 * id) * (config_1.WINDOW_HEIGHT / 2), (Math.random() + 1) * 2, (Math.random() + 1) * (Math.random() + 4)));
}
for (var i = 0; i < 15; i++) {
    append(i);
}
function Distance(a, b) {
    var x = Math.abs(Math.abs(a.getPosition().x) - Math.abs(b.getPosition().x));
    var y = Math.abs(Math.abs(a.getPosition().y) - Math.abs(b.getPosition().y));
    var c = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));
    var r = 1 - c / DISTANCE;
    return r;
}
function DrawLine(a, b) {
    var r = Distance(a, b) - 0.1;
    var color = "rgba(255, 255, 255," + r + ")";
    ctx.strokeStyle = color;
    ctx.beginPath();
    ctx.moveTo(a.getPosition().x, a.getPosition().y);
    ctx.lineTo(b.getPosition().x, b.getPosition().y);
    ctx.stroke();
    return r;
}
var last = new Date();
function update() {
    var t2 = new Date();
    if (t2.getTime() - last.getTime() > 1000 / 15) {
        ctx.clearRect(0, 0, config_1.WINDOW_WIDTH, config_1.WINDOW_HEIGHT);
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, config_1.WINDOW_WIDTH, config_1.WINDOW_HEIGHT);
        for (var i = 0; i < SIZE - 1; i++) {
            points[i].move();
            points[i].resetOpacity(0);
            for (var j = 0; j < SIZE - 1; j++) {
                if (i < j) {
                    DrawLine(points[i], points[j]);
                }
                if (i !== j) {
                    var newop = Distance(points[i], points[j]);
                    points[i].setOpacity(newop);
                }
            }
            points[i].update();
        }
        last = t2;
    }
    setTimeout(function () {
        update();
    }, 1);
}
setTimeout(function () {
    update();
}, 10);
var cof = 10;
function addNew() {
    if (DISTANCE > 700) {
        cof = -1;
    }
    if (DISTANCE < 10) {
        cof = 1;
    }
    DISTANCE += 10 * cof;
    setTimeout(addNew, 10);
}
addNew();
},{"./componets/Point":2,"./config":3}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tcG9uZXRzL09iamVjdFNjZW5lLnRzIiwic3JjL2NvbXBvbmV0cy9Qb2ludC50cyIsInNyYy9jb25maWcudHMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7SUFLRSxxQkFBWSxPQUFlLEVBQUUsQ0FBYSxFQUFFLENBQWE7UUFBNUIsa0JBQUEsRUFBQSxLQUFhO1FBQUUsa0JBQUEsRUFBQSxLQUFhO1FBQ3ZELElBQUksQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDO1FBQ25CLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1osSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDWjs7O2FBR0s7UUFDTCxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUNELGlDQUFXLEdBQVg7UUFDRSxPQUFPO1lBQ0wsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFO1lBQ1YsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFO1NBQ1gsQ0FBQztJQUNKLENBQUM7SUFDRCxpQ0FBVyxHQUFYLFVBQVksQ0FBUyxFQUFFLENBQVM7UUFDOUIsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDWixJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNkLENBQUM7SUFFRCw0QkFBTSxHQUFOO1FBQ0Usd0JBQXdCO0lBQzFCLENBQUM7SUFDSCxrQkFBQztBQUFELENBN0JBLEFBNkJDLElBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdCRCw2Q0FBd0M7QUFDeEMsc0NBQTBEO0FBQzFEO0lBQW1DLHlCQUFXO0lBTzVDLGVBQ0UsT0FBZSxFQUNmLEVBQVUsRUFDVixDQUFhLEVBQ2IsQ0FBYSxFQUNiLENBQWMsRUFDZCxLQUFpQjtRQUhqQixrQkFBQSxFQUFBLEtBQWE7UUFDYixrQkFBQSxFQUFBLEtBQWE7UUFDYixrQkFB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QU0sRUFBRSxDQUFDO0lBQ1gsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ1IsQ0FBQztBQUNELFVBQVUsQ0FBQztJQUNULE1BQU0sRUFBRSxDQUFDO0FBQ1gsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBRVAsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ2IsU0FBUyxNQUFNO0lBQ2IsSUFBSSxRQUFRLEdBQUcsR0FBRyxFQUFFO1FBQ2xCLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNWO0lBQ0QsSUFBSSxRQUFRLEdBQUcsRUFBRSxFQUFFO1FBQ2pCLEdBQUcsR0FBRyxDQUFDLENBQUM7S0FDVDtJQUNELFFBQVEsSUFBSSxFQUFFLEdBQUcsR0FBRyxDQUFDO0lBQ3JCLFVBQVUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDekIsQ0FBQztBQUNELE1BQU0sRUFBRSxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgT2JqZWN0U2NlbmUge1xyXG4gIGN0eDogT2JqZWN0O1xyXG4gIF94OiBudW1iZXI7XHJcbiAgX3k6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogT2JqZWN0LCB4OiBudW1iZXIgPSAwLCB5OiBudW1iZXIgPSAwKSB7XHJcbiAgICB0aGlzLmN0eCA9IGNvbnRleHQ7XHJcbiAgICB0aGlzLl94ID0geDtcclxuICAgIHRoaXMuX3kgPSB5O1xyXG4gICAgLypjb25zb2xlLmxvZyh7XHJcbiAgICAgIHg6IHRoaXMuX3gsXHJcbiAgICAgIHk6IHRoaXMuX3lcclxuICAgIH0pOyovXHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIH1cclxuICBnZXRQb3NpdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IHRoaXMuX3gsXHJcbiAgICAgIHk6IHRoaXMuX3lcclxuICAgIH07XHJcbiAgfVxyXG4gIHNldFBvc2l0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl94ID0geDtcclxuICAgIHRoaXMuX3kgPSB5O1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgLy9jb25zb2xlLmxvZyhcInVwZGF0ZVwiKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE9iamVjdFNjZW5lIGZyb20gXCIuL09iamVjdFNjZW5lXCI7XHJcbmltcG9ydCB7IFdJTkRPV19IRUlHSFQsIFdJTkRPV19XSURUSCB9IGZyb20gXCIuLy4uL2NvbmZpZ1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2ludCBleHRlbmRzIE9iamVjdFNjZW5lIHtcclxuICBfcjogbnVtYmVyO1xyXG4gIF9kaXJlY3Rpb25YOiBudW1iZXIgPSBNYXRoLnJhbmRvbSgpIC0gMC41O1xyXG4gIF9kaXJlY3Rpb25ZOiBudW1iZXIgPSBNYXRoLnJhbmRvbSgpIC0gMC41O1xyXG4gIF9zcGVlZDogbnVtYmVyID0gMjtcclxuICBfb3BhY2l0eTogbnVtYmVyID0gMC4xO1xyXG4gIF9pZDogbnVtYmVyID0gMTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNvbnRleHQ6IE9iamVjdCxcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICB4OiBudW1iZXIgPSAwLFxyXG4gICAgeTogbnVtYmVyID0gMCxcclxuICAgIHI6IG51bWJlciA9IDEwLFxyXG4gICAgc3BlZWQ6IG51bWJlciA9IDNcclxuICApIHtcclxuICAgIHN1cGVyKGNvbnRleHQsIHgsIHkpO1xyXG4gICAgdGhpcy5faWQgPSBpZDtcclxuICAgIHRoaXMuX3IgPSByO1xyXG4gICAgdGhpcy5fc3BlZWQgPSBzcGVlZDtcclxuICB9XHJcbiAgZ2V0UmFkaXVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3I7XHJcbiAgfVxyXG4gIHNldFJhZGl1cyhyOiBudW1iZXIpIHtcclxuICAgIHRoaXMuX3IgPSByO1xyXG4gIH1cclxuICByZXNldE9wYWNpdHkoKSB7XHJcbiAgICB0aGlzLl9vcGFjaXR5ID0gMDtcclxuICB9XHJcbiAgc2V0T3BhY2l0eShvcGFjaXR5OiBudW1iZXIpIHtcclxuICAgIHRoaXMuX29wYWNpdHkgPSBvcGFjaXR5ID4gdGhpcy5fb3BhY2l0eSA/IG9wYWNpdHkgOiB0aGlzLl9vcGFjaXR5O1xyXG4gIH1cclxuICBtb3ZlKCkge1xyXG4gICAgbGV0IHggPSB0aGlzLl94O1xyXG4gICAgbGV0IHkgPSB0aGlzLl95O1xyXG4gICAgaWYgKHggPj0gV0lORE9XX1dJRFRIKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvblggPSBNYXRoLnJhbmRvbSgpICogLTE7XHJcbiAgICB9XHJcbiAgICBpZiAoeCA8PSAwKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvblggPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHkgPj0gV0lORE9XX0hFSUdIVCkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb25ZID0gTWF0aC5yYW5kb20oKSAqIC0xO1xyXG4gICAgfVxyXG4gICAgaWYgKHkgPD0gMCkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb25ZID0gTWF0aC5yYW5kb20oKTtcclxuICAgIH1cclxuICAgIHggKz0gdGhpcy5fc3BlZWQgKiB0aGlzLl9kaXJlY3Rpb25YO1xyXG4gICAgeSArPSB0aGlzLl9zcGVlZCAqIHRoaXMuX2RpcmVjdGlvblk7XHJcbiAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpO1xyXG4gIH1cclxuICB1cGRhdGUoKSB7XHJcbiAgICBzdXBlci51cGRhdGUoKTtcclxuICAgIHRoaXMuY3R4LnRyYW5zbGF0ZShXSU5ET1dfV0lEVEggLyAyLCBXSU5ET1dfSEVJR0hUIC8gMik7XHJcblxyXG4gICAgdGhpcy5jdHgudHJhbnNsYXRlKC1XSU5ET1dfV0lEVEggLyAyLCAtV0lORE9XX0hFSUdIVCAvIDIpO1xyXG4gICAgdGhpcy5jdHguc2hhZG93Q29sb3IgPSBcInJlZFwiO1xyXG4gICAgdGhpcy5jdHguc2hhZG93Qmx1ciA9IDE1O1xyXG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsXCIgKyB0aGlzLl9vcGFjaXR5ICsgXCIpXCI7XHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsXCIgKyB0aGlzLl9vcGFjaXR5ICsgXCIpIClcIjtcclxuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgdGhpcy5jdHguYXJjKHRoaXMuX3gsIHRoaXMuX3ksIHRoaXMuX3IsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xyXG4gICAgdGhpcy5jdHguZmlsbCgpO1xyXG5cclxuICAgIC8qIHRoaXMuY3R4LmZpbGxTdHlsZSA9IFwicmVkXCI7XHJcbiAgICB0aGlzLmN0eC5maWxsVGV4dCh0aGlzLl9pZCwgdGhpcy5feCwgdGhpcy5feSk7Ki9cclxuICB9XHJcbn1cclxuIiwibGV0IFdJTkRPV19IRUlHSFQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbmxldCBXSU5ET1dfV0lEVEggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHJcbmV4cG9ydCB7IFdJTkRPV19XSURUSCwgV0lORE9XX0hFSUdIVCB9O1xyXG4iLCJpbXBvcnQgUG9pbnQgZnJvbSBcIi4vY29tcG9uZXRzL1BvaW50XCI7XHJcbmltcG9ydCB7IFdJTkRPV19XSURUSCwgV0lORE9XX0hFSUdIVCB9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5sZXQgU0laRSA9IDA7XHJcbmxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcclxubGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG5sZXQgRElTVEFOQ0UgPSAxO1xyXG5sZXQgcG9pbnRzOiBQb2ludCA9IFtdO1xyXG5cclxuZnVuY3Rpb24gc2V0U2l6ZUNhbnZhcyhjYW52OiBPYmplY3QpIHtcclxuICBjYW52LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFdJTkRPV19XSURUSC50b1N0cmluZygpICsgXCJweFwiKTtcclxuICBjYW52LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBXSU5ET1dfSEVJR0hULnRvU3RyaW5nKCkgKyBcInB4XCIpO1xyXG59XHJcbnNldFNpemVDYW52YXMoY2FudmFzKTtcclxuXHJcbmZ1bmN0aW9uIGFwcGVuZChpZCkge1xyXG4gIFNJWkUrKztcclxuICBwb2ludHMucHVzaChcclxuICAgIG5ldyBQb2ludChcclxuICAgICAgY3R4LFxyXG4gICAgICBpZCxcclxuICAgICAgV0lORE9XX1dJRFRIIC8gMiArIE1hdGguc2luKDEwICogaWQpICogKFdJTkRPV19XSURUSCAvIDUpLFxyXG4gICAgICBXSU5ET1dfSEVJR0hUIC8gMiArIE1hdGguY29zKDEwICogaWQpICogKFdJTkRPV19IRUlHSFQgLyAyKSxcclxuICAgICAgKE1hdGgucmFuZG9tKCkgKyAxKSAqIDIsXHJcbiAgICAgIChNYXRoLnJhbmRvbSgpICsgMSkgKiAoTWF0aC5yYW5kb20oKSArIDQpXHJcbiAgICApXHJcbiAgKTtcclxufVxyXG5cclxuZm9yIChsZXQgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XHJcbiAgYXBwZW5kKGkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEaXN0YW5jZShhOiBPYmplY3QsIGI6IE9iamVjdCkge1xyXG4gIGxldCB4ID0gTWF0aC5hYnMoTWF0aC5hYnMoYS5nZXRQb3NpdGlvbigpLngpIC0gTWF0aC5hYnMoYi5nZXRQb3NpdGlvbigpLngpKTtcclxuICBsZXQgeSA9IE1hdGguYWJzKE1hdGguYWJzKGEuZ2V0UG9zaXRpb24oKS55KSAtIE1hdGguYWJzKGIuZ2V0UG9zaXRpb24oKS55KSk7XHJcblxyXG4gIGxldCBjID0gTWF0aC5zcXJ0KE1hdGgucG93KHgsIDIpICsgTWF0aC5wb3coeSwgMikpO1xyXG4gIGxldCByID0gMSAtIGMgLyBESVNUQU5DRTtcclxuICByZXR1cm4gcjtcclxufVxyXG5mdW5jdGlvbiBEcmF3TGluZShhOiBPYmplY3QsIGI6IE9iamVjdCkge1xyXG4gIGxldCByID0gRGlzdGFuY2UoYSwgYikgLSAwLjE7XHJcbiAgbGV0IGNvbG9yID0gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsXCIgKyByICsgXCIpXCI7XHJcbiAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gIGN0eC5tb3ZlVG8oYS5nZXRQb3NpdGlvbigpLngsIGEuZ2V0UG9zaXRpb24oKS55KTtcclxuICBjdHgubGluZVRvKGIuZ2V0UG9zaXRpb24oKS54LCBiLmdldFBvc2l0aW9uKCkueSk7XHJcbiAgY3R4LnN0cm9rZSgpO1xyXG4gIHJldHVybiByO1xyXG59XHJcblxyXG5sZXQgbGFzdCA9IG5ldyBEYXRlKCk7XHJcbmZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICBsZXQgdDIgPSBuZXcgRGF0ZSgpO1xyXG4gIGlmICh0Mi5nZXRUaW1lKCkgLSBsYXN0LmdldFRpbWUoKSA+IDEwMDAgLyAxNSkge1xyXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBXSU5ET1dfV0lEVEgsIFdJTkRPV19IRUlHSFQpO1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBXSU5ET1dfV0lEVEgsIFdJTkRPV19IRUlHSFQpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBTSVpFIC0gMTsgaSsrKSB7XHJcbiAgICAgIHBvaW50c1tpXS5tb3ZlKCk7XHJcbiAgICAgIHBvaW50c1tpXS5yZXNldE9wYWNpdHkoMCk7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgU0laRSAtIDE7IGorKykge1xyXG4gICAgICAgIGlmIChpIDwgaikge1xyXG4gICAgICAgICAgRHJhd0xpbmUocG9pbnRzW2ldLCBwb2ludHNbal0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaSAhPT0gaikge1xyXG4gICAgICAgICAgbGV0IG5ld29wID0gRGlzdGFuY2UocG9pbnRzW2ldLCBwb2ludHNbal0pO1xyXG4gICAgICAgICAgcG9pbnRzW2ldLnNldE9wYWNpdHkobmV3b3ApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBwb2ludHNbaV0udXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgICBsYXN0ID0gdDI7XHJcbiAgfVxyXG5cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIHVwZGF0ZSgpO1xyXG4gIH0sIDEpO1xyXG59XHJcbnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gIHVwZGF0ZSgpO1xyXG59LCAxMCk7XHJcblxyXG5sZXQgY29mID0gMTA7XHJcbmZ1bmN0aW9uIGFkZE5ldygpIHtcclxuICBpZiAoRElTVEFOQ0UgPiA3MDApIHtcclxuICAgIGNvZiA9IC0xO1xyXG4gIH1cclxuICBpZiAoRElTVEFOQ0UgPCAxMCkge1xyXG4gICAgY29mID0gMTtcclxuICB9XHJcbiAgRElTVEFOQ0UgKz0gMTAgKiBjb2Y7XHJcbiAgc2V0VGltZW91dChhZGROZXcsIDEwKTtcclxufVxyXG5hZGROZXcoKTtcclxuIl19
